(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{EHCy:function(e,a,t){e.exports={container:"antd-pro-pages-system-action-log-index-container",tableHeader:"antd-pro-pages-system-action-log-index-tableHeader",tableHeaderTitle:"antd-pro-pages-system-action-log-index-tableHeaderTitle",tableToolBar:"antd-pro-pages-system-action-log-index-tableToolBar",tableAdvancedSearchBar:"antd-pro-pages-system-action-log-index-tableAdvancedSearchBar",floatLeft:"antd-pro-pages-system-action-log-index-floatLeft",floatRight:"antd-pro-pages-system-action-log-index-floatRight",danger:"antd-pro-pages-system-action-log-index-danger",success:"antd-pro-pages-system-action-log-index-success",warning:"antd-pro-pages-system-action-log-index-warning",info:"antd-pro-pages-system-action-log-index-info",dark:"antd-pro-pages-system-action-log-index-dark"}},q0k9:function(e,a,t){"use strict";t.r(a);t("g9YV");var n,l,s,o,i=t("wCAj"),r=(t("/zsF"),t("PArb")),c=(t("14J3"),t("BMrR")),d=(t("Pwec"),t("CtXQ")),m=(t("jCWc"),t("kPKH")),p=(t("P2fV"),t("NJEC")),h=t("p0pE"),u=t.n(h),y=t("2Taf"),g=t.n(y),f=t("vZ4D"),E=t.n(f),b=t("l4Ni"),S=t.n(b),k=t("ujKo"),x=t.n(k),v=t("rlhR"),w=t.n(v),N=t("MhPg"),R=t.n(N),C=(t("y8nQ"),t("Vl3Y")),I=(t("OaEy"),t("2fM7")),D=(t("2qtc"),t("kLXV")),K=(t("+L6B"),t("2/Rp")),T=(t("iQDF"),t("+eQT")),M=(t("5NDa"),t("5rEg")),A=t("q1tI"),H=t.n(A),P=t("MuoO"),Y=t("EHCy"),j=t.n(Y),B=t("zHco"),O=(t("7DNP"),t("Qyje")),F=(M["a"].Search,T["a"].RangePicker),z=K["a"].Group,L=D["a"].confirm,Q=(I["a"].Option,n=Object(P["connect"])(function(e){var a=e.model;return{model:a}}),l=C["a"].create(),n(s=l((o=function(e){function a(){var e,t;g()(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return t=S()(this,(e=x()(a)).call.apply(e,[this].concat(l))),t.modelName="actionLog",t.state={msg:"",url:"",data:{categorys:[]},status:"",pagination:{},loading:!1,previewVisible:!1,previewImage:"",expand:!1,selectedRowKeys:[]},t.handleDestroy=function(e){var a=t.props.dispatch;a({type:"model/destroy",payload:{modelName:t.modelName,id:e}}).then(function(){"success"===t.state.status&&(t.state.data.lists=t.state.data.lists.filter(function(a){return a.id!==e}),t.setState(u()({},t.state.data)))})},t.handleStatusChange=function(e,a){t.setState({loading:!0});var n=t.props.dispatch;n({type:"model/changeStatus",payload:{modelName:t.modelName,id:e,status:a}}).then(function(){var e=t.props.dispatch;e({type:"model/index",payload:u()({modelName:t.modelName},t.state.pagination,{search:t.state.search}),callback:function(e){e&&t.setState(u()({},e,{loading:!1}))}})})},t.handleMultiDestroy=function(){var e=w()(t);L({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e9b\u6570\u636e\u5417\uff1f",content:"\u5220\u9664\u540e\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",centered:!0,onOk:function(){var a=e.state.selectedRowKeys,t=e.props.dispatch;t({type:"model/destroy",payload:{modelName:e.modelName,id:a}}).then(function(){"success"===e.state.status&&(a.map(function(a){e.state.data.lists=e.state.data.lists.filter(function(e){return e.id!==a})}),e.setState(u()({},e.state.data,{selectedRowKeys:[]})))})},onCancel:function(){}})},t.handleMultiStatusChange=function(e){t.setState({loading:!0});var a=t.state.selectedRowKeys,n=t.props.dispatch;n({type:"model/changeStatus",payload:{modelName:t.modelName,id:a,status:e}}).then(function(){var e=t.props.dispatch;e({type:"model/index",payload:u()({modelName:t.modelName},t.state.pagination,{search:t.state.search}),callback:function(e){e&&t.setState(u()({},e,{loading:!1}))}})})},t.handleTableChange=function(e,a,n){t.setState({loading:!0});var l=t.props.dispatch;l({type:"model/index",payload:u()({modelName:t.modelName,pageSize:e.pageSize,current:e.current,sortField:n.field,sortOrder:n.order},a,{search:t.state.search}),callback:function(e){e&&t.setState(u()({},e,{loading:!1,selectedRowKeys:[]}))}})},t.toggle=function(){var e=t.state.expand;t.setState({expand:!e})},t.handleSelectAll=function(){var e=t.state.data.lists.map(function(e){return e.id});console.log(e),t.setState({selectedRowKeys:e})},t.handleCancelSelectAll=function(){t.setState({selectedRowKeys:[]})},t.onSelectChange=function(e){console.log("selectedRowKeys changed: ",e),t.setState({selectedRowKeys:e})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(a.dateRange&&a.dateRange[0]&&a.dateRange[1]){var n=a.dateRange[0].format("YYYY-MM-DD"),l=a.dateRange[1].format("YYYY-MM-DD");a.dateRange=[],a.dateRange=[n,l]}if(!e){var s=t.props.dispatch;s({type:"model/index",payload:u()({modelName:t.modelName},t.state.pagination,{search:a}),callback:function(e){e&&t.setState(u()({},e,{loading:!1}))}})}})},t.handleResetSearch=function(){t.props.form.resetFields()},t}return R()(a,e),E()(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.dispatch({type:"model/index",payload:{modelName:this.modelName},callback:function(a){a&&e.setState(u()({},a,{loading:!1}))}})}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator,t=this.state.selectedRowKeys,n={selectedRowKeys:t,onChange:this.onSelectChange,getCheckboxProps:function(e){return{name:e.name}},fixed:"left"},l=[{title:"\u7528\u6237\u540d",dataIndex:"username",key:"username"},{title:"\u884c\u4e3a",dataIndex:"action",key:"action"},{title:"\u8bbf\u95ee\u5730\u5740",dataIndex:"url",key:"url"},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"\u53d1\u751f\u65f6\u95f4",dataIndex:"created_at",key:"created_at"},{title:"\u64cd\u4f5c",key:"actions",fixed:"right",width:80,render:function(a,t){return H.a.createElement("span",null,H.a.createElement(p["a"],{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:function(){return e.handleDestroy(t.id)}},H.a.createElement("a",{href:"javascript:;"},"\u5220\u9664")))}}];return H.a.createElement(B["a"],null,H.a.createElement("div",{className:j.a.container},H.a.createElement("div",{className:j.a.tableHeader},H.a.createElement(c["a"],{type:"flex",justify:"start"},H.a.createElement(m["a"],{span:12},H.a.createElement("h5",{className:j.a.tableHeaderTitle},"\u65e5\u5fd7\u5217\u8868")),H.a.createElement(m["a"],{span:12},H.a.createElement("div",{className:j.a.floatRight},"\xa0",H.a.createElement("a",{href:"/api/admin/"+this.modelName+"/export?"+Object(O["stringify"])({search:this.state.search}),target:"_blank"},H.a.createElement(K["a"],null,H.a.createElement(d["a"],{type:"export"}),"\u5bfc\u51fa\u6570\u636e")))))),H.a.createElement(r["a"],{style:{marginBottom:10}}),H.a.createElement("div",{className:j.a.tableToolBar},H.a.createElement(c["a"],{type:"flex",justify:"start"},H.a.createElement(m["a"],{span:8},H.a.createElement(z,null,H.a.createElement(K["a"],{onClick:function(){return e.handleSelectAll()}},"\u5168\u9009"),H.a.createElement(K["a"],{onClick:function(){return e.handleCancelSelectAll()}},"\u53d6\u6d88")),H.a.createElement(r["a"],{type:"vertical"}),H.a.createElement(K["a"],{onClick:function(){return e.handleMultiDestroy()},type:"danger"},"\u5220\u9664")),H.a.createElement(m["a"],{span:16},H.a.createElement("div",{className:j.a.floatRight},H.a.createElement(C["a"],{layout:"inline",onSubmit:this.handleSearch},H.a.createElement(C["a"].Item,{style:{display:"inline-block"}},a("name")(H.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u7528\u6237\u540d",style:{width:200}}))),H.a.createElement(C["a"].Item,{style:{display:"inline-block"}},H.a.createElement(K["a"],{htmlType:"submit"},"\u641c\u7d22")),H.a.createElement(C["a"].Item,{style:{marginRight:10}},H.a.createElement("a",{style:{fontSize:12},onClick:this.toggle},"\u9ad8\u7ea7\u641c\u7d22 ",H.a.createElement(d["a"],{type:this.state.expand?"up":"down"})))))))),H.a.createElement("div",{className:j.a.tableAdvancedSearchBar,style:{display:this.state.expand?"block":"none"}},H.a.createElement(c["a"],null,H.a.createElement(m["a"],{span:24},H.a.createElement(C["a"],{layout:"inline",onSubmit:this.handleSearch},H.a.createElement(C["a"].Item,{label:"\u884c\u4e3a",style:{display:"inline-block"}},a("action")(H.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684\u884c\u4e3a",style:{width:200}}))),H.a.createElement(C["a"].Item,{label:"ip",style:{display:"inline-block"}},a("ip")(H.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165ip\u5730\u5740",style:{width:200}}))),H.a.createElement(C["a"].Item,{label:"\u5907\u6ce8",style:{display:"inline-block"}},a("remark")(H.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8\u4fe1\u606f",style:{width:200}}))),H.a.createElement(C["a"].Item,{label:"\u53d1\u751f\u65f6\u95f4"},a("dateRange")(H.a.createElement(F,null))),H.a.createElement(C["a"].Item,null,H.a.createElement(K["a"],{type:"primary",icon:"search",htmlType:"submit"},"\u9ad8\u7ea7\u641c\u7d22"),"\xa0",H.a.createElement(K["a"],{onClick:this.handleResetSearch},"\u91cd\u7f6e")))))),H.a.createElement("div",{className:j.a.tableData},H.a.createElement(i["a"],{rowKey:function(e){return e.id},rowSelection:n,columns:l,dataSource:this.state.data.lists,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange}))))}}]),a}(A["PureComponent"]),s=o))||s)||s);a["default"]=Q}}]);